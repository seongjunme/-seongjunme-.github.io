<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.8.0"/><title data-react-helmet="true"></title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/webpack-runtime-c0e03c5deb701c4aedb9.js"/><link as="script" rel="preload" href="/framework-6bdc9aaa9caa3de6408b.js"/><link as="script" rel="preload" href="/app-f34191c66d70ce0253b2.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-cdd982b2742c5fa0a328.js"/><link as="fetch" rel="preload" href="/page-data/í¬íŠ¸í´ë¦¬ì˜¤ì‚¬ì´íŠ¸/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css rmgwh1">.css-rmgwh1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;background-color:#121212;color:white;}.css-rmgwh1::-webkit-scrollbar-thumb{background-color:#ffffff;}</style><div class="css-rmgwh1 ef79xez0"><style data-emotion="css-global 1llifsc">@import url(http://fonts.googleapis.com/css?family=Open+Sans:300italic,300);*{padding:0;margin:0;box-sizing:border-box;font-family:'Open Sans',Helvetica,sans-serif;font-weight:300;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css z5i94e">.css-z5i94e{position:relative;width:100%;height:350px;}</style><div class="css-z5i94e evp6fv50"><style data-emotion="css 1cf6hsn">.css-1cf6hsn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:100%;margin:0 auto;padding:60px 0;color:#ffffff;}</style><div class="css-1cf6hsn e1x0sffc2"><style data-emotion="css 1pr6csa">.css-1pr6csa{overflow:hidden;overflow-wrap:break-word;margin-top:auto;text-overflow:ellipsis;white-space:normal;font-size:45px;font-weight:800;}</style><div class="css-1pr6csa e1x0sffc1">Gatsbyë¡œ ë§Œë“  í¬íŠ¸í´ë¦¬ì˜¤ ì‚¬ì´íŠ¸</div><style data-emotion="css 15xrm5i">.css-15xrm5i{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:18px;font-weight:700;}.css-15xrm5i div{margin-top:10px;}</style><div class="css-15xrm5i e1x0sffc0"><div>2022.03.08.</div><div>React / Gatsby</div></div></div></div><style data-emotion="css n1la39">.css-n1la39{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;word-break:break-all;line-height:1.8;font-size:1.125rem;font-weight:400;color:#ececec;}.css-n1la39 p{padding:3px 0;}.css-n1la39 h1,.css-n1la39 h2,.css-n1la39 h3,.css-n1la39 h4{margin:2.414rem 0 1rem;font-weight:inherit;line-height:1.42;}.css-n1la39 h1{font-size:3.598rem;}.css-n1la39 h2{font-size:2.827rem;}.css-n1la39 h3{font-size:1.999rem;}.css-n1la39 h4{font-size:1.414rem;}.css-n1la39 h5{font-size:1.121rem;}.css-n1la39 h6{font-size:0.88rem;}.css-n1la39 blockquote{margin:10px 0;border-left:5px solid #7a7a7a;font-style:italic;padding:5px 15px;text-align:left;background-color:#1e1e1e;}.css-n1la39 aside{background-color:#1e1e1e;margin:10px 0;}.css-n1la39 table{background-color:#22272e;border-collapse:collapse;}.css-n1la39 table th,.css-n1la39 table td{padding:6px 13px;}.css-n1la39 table th:not(first-child),.css-n1la39 table td:not(first-child){border:1px solid #444c56;}.css-n1la39 ol,.css-n1la39 ul{margin-left:20px;padding:10px 0;}.css-n1la39 hr{margin:30px 0;background:#4d4d4d;border:none;height:1px;width:100%;}.css-n1la39 a:link{-webkit-text-decoration:none;text-decoration:none;text-shadow:0 0 24px;}.css-n1la39 a:hover{color:#4263eb;}.css-n1la39 strong{font-weight:bold;}.css-n1la39 deckgo-highlight-code{font-size:14px;}</style><div class="css-n1la39 era8a5j0"><h3><a href="https://github.com/seongjunme/my-blog" target="_blank" rel="nofollow">í”„ë¡œì íŠ¸ repository ë°”ë¡œê°€ê¸°</a></h3>
<hr>
<h2>ğŸ–¥ í”„ë¡œì íŠ¸ ì†Œê°œ</h2>
<p>í‰ì†Œì— êµ¬í˜„í•´ë³´ê³  ì‹¶ì—ˆë˜ Full Pageì˜ ê¸°ëŠ¥ì„ ì¤‘ì ìœ¼ë¡œ</p>
<p>í¬íŠ¸í´ë¦¬ì˜¤ì™€ ì‘ì„±í•œ ë¸”ë¡œê·¸ë“¤ì„ ì •ë¦¬í•˜ê¸° ìœ„í•œ ì‚¬ì´íŠ¸</p>
<h2>ğŸ“š ê¸°ìˆ  ìŠ¤íƒ</h2>
<ul>
<li>
<p>React (hooks)</p>
</li>
<li>
<p>TypeScript</p>
</li>
<li>
<p>Emotion</p>
</li>
<li>
<p>Gatsby</p>
</li>
<li>
<p>Graphql</p>
</li>
</ul>
<h2>ğŸ›  ì£¼ìš” ê¸°ëŠ¥</h2>
<ul>
<li>Gatsbyë¥¼ ì´ìš©í•œ ë¸”ë¡œê·¸</li>
<li>Full Page ì‚¬ì´íŠ¸</li>
<li>ë¬´í•œ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥</li>
</ul>
<h2>ğŸ‘ ê¸°ìˆ  íŠ¹ì¥ì </h2>
<h3>1ï¸âƒ£ Graphqlì„ ì´ìš©í•œ Markdown ë°ì´í„° ìš”ì²­</h3>
<p>Gatsbyì—ì„œ ì œê³µí•´ì£¼ëŠ” Graphqlì„ ì´ìš©í•˜ì—¬ Markdown ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì–»ê³ , ì´ë¥¼ htmlë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.
ì´ë¥¼ ìœ„í•´ì„œëŠ” ë¨¼ì € ë‘ ê°€ì§€ í”ŒëŸ¬ê·¸ì¸ì´ í•„ìš”í•˜ë‹¤.</p>
<ul>
<li>gatsby-source-filesystem</li>
<li>gatsby-transformer-remark</li>
</ul>
<p>í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•œ í›„ gatsby-configì— ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•´ì¤€ë‹¤.</p>
<deckgo-highlight-code language="js" terminal="carbon"  >
          <code slot="code">// gatsby-config.js
module.exports = {
  plugins: [
    {
      resolve: `gatsby-source-filesystem`,
      options: {
        name: `contents`,
        path: `${__dirname}/contents`,
      },
    },
    {
      resolve: `gatsby-transformer-remark`,
      options: {
        plugins: [...],
      },
    }
  ],
};
</code>
        </deckgo-highlight-code>
<h4><strong>gatsby-source-filesystem</strong></h4>
<p>ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œì˜ íŒŒì¼ì„ File ë…¸ë“œë¡œ ìƒì„±í•˜ì—¬ graphqlì„ í†µí•´ ë°ì´í„°ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤. <br />
ë‹¨, ë§ˆí¬ë‹¤ìš´ì„ pathì— ì§€ì •í•œ ê²½ë¡œì— ì €ì¥í•´ì•¼í•œë‹¤.</p>
<h4>gatsby-transformer-remark</h4>
<p>ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ íŒŒì‹±í•˜ì—¬ MarkdownRemark ë…¸ë“œë¡œ ìƒì„±í•œë‹¤.
ìƒì„±ëœ ë…¸ë“œëŠ” graphqlì„ í†µí•´ ë°ì´í„°ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>
<br />
<deckgo-highlight-code  terminal="carbon"  >
          <code slot="code">query getMarkdownData {
  allMarkdownRemark {
    edges {
      node {
        html
        id
        frontmatter {
          title,
          summary,
          ...
        }
      }
    }
  }
}</code>
        </deckgo-highlight-code>
<br />
<h3>2ï¸âƒ£ Gatsbyì˜ slug ê¸°ëŠ¥ì„ ì´ìš©í•˜ì—¬ í•´ë‹¹ Markdown ê²Œì‹œê¸€ê³¼ ì—°ë™</h3>
<h4>slug ìƒì„±</h4>
<p>ë§ˆí¬ë‹¤ìš´ ë°ì´í„°ì— slug í•„ë“œë¥¼ ì¶”ê°€í•˜ì—¬ í•´ë‹¹ ê²Œì‹œë¬¼ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ urlì„ ìƒì„±í•œë‹¤.</p>
<p>í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  onCreateNodeë¼ëŠ” gatsbyì—ì„œ ì œê³µí•˜ëŠ” APIë¥¼ ì‚¬ìš©í•œë‹¤.</p>
<br />
<deckgo-highlight-code language="js" terminal="carbon"  >
          <code slot="code">// gatsby-node.js
exports.onCreateNode = ({ node, getNode, actions }) =&gt; {
  const { createNodeField } = actions;

  if (node.internal.type === `MarkdownRemark`) {
    const slug = createFilePath({ node, getNode });

    createNodeField({ node, name: &#39;slug&#39;, value: slug });
  }
};</code>
        </deckgo-highlight-code>
<br />
ë§ˆí¬ë‹¤ìš´ ë°ì´í„°ì— í•œí•´ì„œ slug í•„ë“œë¥¼ ì¶”ê°€í•œë‹¤.
ê·¸ë¦¬ê³  slugë°ì´í„°ëŠ” ê²½ë¡œì™€ íŒŒì¼ëª…ì„ ì¡°í•©í•´ ìƒì„±ëœë‹¤.
<p>ex) contents/ShallWeSound.md -> domain/ShallWeSound</p>
<h4>slugë¥¼ ì´ìš©í•´ í˜ì´ì§€ ìƒì„±</h4>
<p>ë§ˆí¬ë‹¤ìš´ ë°ì´í„°ë¥¼ ì´ìš©í•´ slugë¥¼ ìƒì„±í•´ì£¼ì—ˆìœ¼ë‹ˆ, ì´ì œëŠ” ì´ slugë¥¼ ì´ìš©í•´ ì ‘ê·¼í•  í˜ì´ì§€ë¥¼ ìƒì„±í•œë‹¤.
í˜ì´ì§€ ìƒì„±ì€ gatsbyì˜ createPages APIë¥¼ ì´ìš©í•œë‹¤.</p>
<br />
<deckgo-highlight-code language="js" terminal="carbon"  >
          <code slot="code">// gatsby-node.js
exports.createPages = async ({ actions, graphql, reporter }) =&gt; {
  const { createPage } = actions;

  const queryAllMarkdownData = await graphql(
    `
      {
        allMarkdownRemark {
          edges {
            node {
              fields {
                slug
              }
            }
          }
        }
      }
    `,
  );

  if (queryAllMarkdownData.errors) {
    reporter.panicOnBuild(`Query Error`);
    return;
  }

  const PostTemplateComponent = path.resolve(__dirname, &#39;src/templates/post.tsx&#39;);

  const generatePostPage = ({
    node: {
      fields: { slug },
    },
  }) =&gt; {
    const pageOptions = {
      path: slug,
      component: PostTemplateComponent,
      context: { slug },
    };

    createPage(pageOptions);
  };

  queryAllMarkdownData.data.allMarkdownRemark.edges.forEach(generatePostPage);
};</code>
        </deckgo-highlight-code>
<br />
<p>template í´ë”ì— post.tsxë¡œ ê²Œì‹œê¸€ í˜ì´ì§€ì˜ í…œí”Œë¦¿ì„ ì •ì˜í•œë‹¤.
ê·¸ë¦¬ê³  ê·¸ í…œí”Œë¦¿ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.</p>
<p>ë‹¤ìŒìœ¼ë¡œ pageOtionsì„ ì •ì˜í•˜ê³ , ì‹¤ì œë¡œ í˜ì´ì§€ë¥¼ ìƒì„±í•´ì¤„ generatePostPage í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤.
ì—¬ê¸°ì„œ pathëŠ” í˜ì´ì§€ì˜ ê²½ë¡œë¥¼ ë‚˜íƒ€ë‚´ê³ , componentëŠ” ê²Œì‹œê¸€ì„ ë Œë”ë§í•  ì»´í¬ë„ŒíŠ¸ë¥¼ ì˜ë¯¸í•œë‹¤.
ë§ˆì§€ë§‰ìœ¼ë¡œ contextëŠ” ë°”ë¡œ ì•ì„œ ì •ì˜í•œ componentì— propsë¡œ ë„˜ê²¨ì¤„ ìˆ˜ ìˆëŠ” ê°’ì´ë‹¤.
ì´ slugë¥¼ í†µí•´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë§ëŠ” ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œë¥¼ ì°¾ì•„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤.</p>
<p>ê·¸ë¦¬ê³  graphqlì„ í†µí•´ ë¶ˆëŸ¬ì˜¨ queryAllMarkdownData ê°’ì—ì„œ markdown ë°ì´í„°ê°€ ë“¤ì–´ìˆëŠ” edgesë¥¼ ë°˜ë³µí•˜ì—¬ í˜ì´ì§€ ìƒì„± í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ ì¤€ë‹¤.</p>
<h3>3ï¸âƒ£ Full Page êµ¬í˜„</h3>
<h4>useFullPageë¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ìƒì„± - index.tsx</h4>
<ul>
<li>ë°˜í™˜ ê°’ìœ¼ë¡œëŠ”
<ul>
<li>ìµœìƒë‹¨ì„ ì§€ì •í•˜ê¸° ìœ„í•œ outerRef</li>
<li>í˜„ì¬ ë¶€ë¶„(í˜ì´ì§€)ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ currentPageName</li>
<li>full page ìƒë‹¨ì˜ navBarë¥¼ í´ë¦­í–ˆì„ ë•Œì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ onClickNavBar</li>
</ul>
</li>
</ul>
<deckgo-highlight-code language="jsx" terminal="carbon"  >
          <code slot="code">// index.tsx
const Index: React.FC = () =&gt; {
  const [outerRef, currentPageName, onClickNavBar] = useFullPage({ maxPageCount: 3 });

  return (
    &lt;Background ref={outerRef} className=&quot;outer&quot;&gt;
      &lt;NavBar currentPageName={currentPageName} onClickNavBar={onClickNavBar} /&gt;
      &lt;About /&gt;
      &lt;PostList /&gt;
      &lt;PostList /&gt;
      &lt;Contact /&gt;
    &lt;/Background&gt;
  );
};</code>
        </deckgo-highlight-code>
<h4>useFullPage.tsx</h4>
<ul>
<li>ì¸ìë¡œ í˜ì´ì§€(íŒŒíŠ¸)ì˜ ìµœëŒ€ ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤.
<ul>
<li>í˜ì´ì§€ ìˆ˜ëŠ” 0ë¶€í„° ì‹œì‘</li>
</ul>
</li>
<li>í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ useRefë¡œ ê´€ë¦¬í•œë‹¤.
<ul>
<li>ë²ˆí˜¸ë¥¼ stateë¡œ ê´€ë¦¬í•˜ë©´ ìŠ¤í¬ë¡¤ì„ ì´ë™í•  ë•Œ, stateì˜ ìµœì‹ ê°’ì„ ì‚¬ìš©í•˜ê¸°ê°€ ì–´ë ¤ì›Œì§„ë‹¤.</li>
</ul>
</li>
</ul>
<deckgo-highlight-code language="js" terminal="carbon"  >
          <code slot="code">// useFullPage.tsx
const PAGE_NAMES = [&#39;About&#39;, &#39;Project&#39;, &#39;Blog&#39;, &#39;Contact&#39;];

const useFullPage = ({ maxPageCount }: { maxPageCount: number }) =&gt; {
  const outerRef = useRef&lt;any&gt;();
  const currentPage = useRef(0);
  const [currentPageName, setCurrentPageName] = useState(PAGE_NAMES[currentPage.current]);

  ...
}</code>
        </deckgo-highlight-code>
<h4>wheel ë™ì‘ì— ë”°ë¼ currentPageê°€ ê°€ë¦¬í‚¤ëŠ” ë¶€ë¶„ìœ¼ë¡œ ìŠ¤í¬ë¡¤ì„ ì´ë™ì‹œí‚¨ë‹¤.</h4>
<ul>
<li>ì´ë™ ì‹œí‚¤ëŠ” ê¸°ì¤€ì€ í˜„ì¬ í™”ë©´ í¬ê¸°(window.innerHeight)ì™€ currentPageê°€ ê°€ë¦¬í‚¤ëŠ” ê°’ì´ë‹¤.</li>
<li>í˜„ì¬ í™”ë©´ í¬ê¸°ê°€ 720pxì´ê³  í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ê°€ 0ì¼ ë•Œ topì€ 0ì´ë˜ê³ , í˜ì´ì§€ ë²ˆí˜¸ê°€ 1ì´ë©´ topì€ 720pxì´ ëœë‹¤.</li>
<li>ì¦‰, 0~720pxì€ í˜ì´ì§€ 0ì´ ì°¨ì§€í•˜ê³ , 720px ~ 1440px ì€ í˜ì´ì§€ 1ì´ ì°¨ì§€í•œë‹¤ëŠ” ëœ»ì´ë‹¤.</li>
</ul>
<deckgo-highlight-code language="jsx" terminal="carbon"  >
          <code slot="code">// useFullPage.tsx
const useFullPage = ({ maxPageCount }: { maxPageCount: number }) =&gt; {
  ...

  const scrollToCurrentPage = () =&gt; {
    outerRef.current.scrollTo({
      top: window.innerHeight * currentPage.current,
      left: 0,
      behavior: &#39;smooth&#39;,
    });
  };

  const scrollDown = () =&gt; {
    currentPage.current += 1;
    scrollToCurrentPage();
    setCurrentPageName(PAGE_NAMES[currentPage.current]);
  };

  const scrollUp = () =&gt; {
    currentPage.current -= 1;
    scrollToCurrentPage();
    setCurrentPageName(PAGE_NAMES[currentPage.current]);
  };
}</code>
        </deckgo-highlight-code>
<h4>outerRefì— ì´ë²¤íŠ¸ ë“±ë¡</h4>
<ul>
<li>deltaY ê°’ì„ í™•ì¸í•´, wheel ì´ë²¤íŠ¸ê°€ ìœ„ì¸ì§€, ì•„ë˜ì¸ì§€ êµ¬ë¶„í•˜ì—¬ ë™ì‘ì‹œí‚¨ë‹¤.</li>
<li>debounceë¥¼ ì ìš©í•˜ì—¬ í•œë²ˆì— wheel ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì—°ì†ìœ¼ë¡œ ìˆ˜í–‰ë˜ì§€ ì•Šë„ë¡ í•œë‹¤.
<ul>
<li>ë§ˆìš°ìŠ¤ íœ ì˜ ê²½ìš° êµ‰ì¥íˆ ë¯¼ê°í•˜ê¸° ë•Œë¬¸ì— ì¡°ê¸ˆë§Œ ì›€ì§ì—¬ë„ ìˆ˜ì‹­ê°œì˜ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œë‹¤.</li>
<li>ë”°ë¼ì„œ ìŠ¤í¬ë¡¤ í•œë²ˆìœ¼ë¡œ ì²« í˜ì´ì§€ì—ì„œ ë§ˆì§€ë§‰ í˜ì´ì§€ ê¹Œì§€ ë‚´ë ¤ê°€ëŠ” í˜„ìƒì´ ë°œìƒí–ˆê³ , ì´ë¥¼ debounceë¥¼ ì ìš©í•¨ìœ¼ë¡œì¨ í•´ê²°í•˜ì˜€ë‹¤.</li>
</ul>
</li>
</ul>
<deckgo-highlight-code language="jsx" terminal="carbon"  >
          <code slot="code">// useFullPage.tsx
const useFullPage = ({ maxPageCount }: { maxPageCount: number }) =&gt; {
  ...

  useEffect(() =&gt; {
    const wheelHandler = debounce((e: WheelEvent) =&gt; {
      e.preventDefault();

      const { deltaY } = e;

      if (deltaY &gt; 0 &amp;&amp; currentPage.current &lt; maxPageCount) {
        scrollDown();
      } else if (deltaY &lt; 0 &amp;&amp; currentPage.current &gt; 0) {
        scrollUp();
      }
    }, 50);

    outerRef.current?.addEventListener(&#39;wheel&#39;, wheelHandler);

    return () =&gt; {
      outerRef.current?.removeEventListener(&#39;wheel&#39;, wheelHandler);
    };
  }, []);
}
</code>
        </deckgo-highlight-code>
<br />
<deckgo-highlight-code language="js" terminal="carbon"  >
          <code slot="code">// debounce.ts
const debounce = (callback: (...arg: any) =&gt; void, delay: number) =&gt; {
  let timer: NodeJS.Timeout;

  return (...arg: any) =&gt; {
    clearTimeout(timer);
    timer = setTimeout(() =&gt; callback(...arg), delay);
  };
};

export default debounce;</code>
        </deckgo-highlight-code>
<h4>ë§ˆì§€ë§‰ìœ¼ë¡œ ë¸Œë¼ìš°ì € ì°½ì˜ í¬ê¸°ë¥¼ ë³€ê²½í•  ì‹œ, window.innerHeightë¥¼ ë‹¤ì‹œ ê³„ì‚°í•˜ì—¬ í•´ë‹¹ ê°’ì— ë§ê²Œ ìŠ¤í¬ë¡¤ì„ ì´ë™ì‹œì¼œì•¼ í•œë‹¤.</h4>
<ul>
<li>resize ì´ë²¤íŠ¸ ë°œìƒ ì‹œ, í˜„ì¬ í˜ì´ì§€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìŠ¤í¬ë¡¤ì„ ì´ë™ì‹œì¼œì£¼ëŠ” í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.</li>
</ul>
<deckgo-highlight-code language="js" terminal="carbon"  >
          <code slot="code">// useFullPage.tsx
useEffect(() =&gt; {
  window.addEventListener(&#39;resize&#39;, scrollToCurrentPage);

  return () =&gt; {
    window.removeEventListener(&#39;resize&#39;, scrollToCurrentPage);
  };
});</code>
        </deckgo-highlight-code>
<br />
<h3>4ï¸âƒ£ ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„</h3>
<h4>useInfiniteScroll ë¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ìƒì„±í•˜ê³  ì‚¬ìš©</h4>
<ul>
<li>posts ë°°ì—´ê³¼, ì¹´í…Œê³ ë¦¬ì— ë”°ë¥¸ í•„í„°ë§ì„ ìœ„í•´ selectedCategoryë¥¼ ì¸ìë¡œ ë„˜ê²¨ì¤€ë‹¤.</li>
<li>ë°˜í™˜ ê°’ìœ¼ë¡œëŠ” observeí•  Refì™€ postsì˜ ë¶€ë¶„ ë°°ì—´ì¸ postsByPage ë°°ì—´ì´ ë°˜í™˜ëœë‹¤.</li>
</ul>
<deckgo-highlight-code language="jsx" terminal="carbon"  >
          <code slot="code">const BlogList: React.FC&lt;Props&gt; = ({ posts, selectedCategory }) =&gt; {
  const { targetRef, postsByPage } = useInfiniteScroll({ posts, selectedCategory });

  return (
    &lt;Wrapper ref={targetRef}&gt;
      {postsByPage.map(
        ({
          node: {
            id,
            fields: { slug },
            frontmatter,
          },
        }) =&gt; (
          &lt;PostItem key={id} link={slug} {...frontmatter} /&gt;
        ),
      )}
    &lt;/Wrapper&gt;
  );
};</code>
        </deckgo-highlight-code>
<br />
<h4>useInfiniteScroll êµ¬í˜„</h4>
<ul>
<li>page ìƒíƒœì— ë”°ë¼ ë Œë”ë§í•  postì˜ ê°œìˆ˜ë¥¼ ì •í•œë‹¤.
<ul>
<li>page ê°’ì´ 1ì´ë©´ page(1) * POST_COUNT_BY_PAGE(9) = 9 ê°œì˜ postê°€ ë°˜í™˜ëœë‹¤.</li>
</ul>
</li>
<li>IntersectionOberserverë¥¼ í™œìš©í•˜ì—¬ observe ì´ë²¤íŠ¸ ë°œìƒ ì‹œ pageë¥¼ 1ì¦ê°€ ì‹œí‚¨ë‹¤.
<ul>
<li>pageê°€ ì¦ê°€í•¨ì— ë”°ë¼ ìµœëŒ€ 9ê°œì˜ ìƒˆë¡œìš´ í¬ìŠ¤íŠ¸ê°€ ì¶”ê°€ë¡œ ë°˜í™˜ëœë‹¤.</li>
</ul>
</li>
<li>observerê°€ targetRefì˜ childrenì˜ ë§ˆì§€ë§‰ ìš”ì†Œë¥¼ ê´€ì°°í•˜ë„ë¡ í•œë‹¤.
<ul>
<li>ìŠ¤í¬ë¡¤ì„ ëê¹Œì§€ ë‚´ë ¤ì„œ ë§ˆì§€ë§‰ ìš”ì†Œê°€ ê´€ì°°ë˜ë©´ ë“±ë¡í•œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ìˆ˜í–‰í•œë‹¤.</li>
</ul>
</li>
<li>observerë¥¼ ë§¤ë²ˆ disconnectí•˜ê³  ìƒˆë¡­ê²Œ observeë“±ë¡ì„ í•˜ëŠ” ì´ìœ ëŠ” ë§ˆì§€ë§‰ postê¹Œì§€ ë Œë”ë§í–ˆë‹¤ë©´ ë” ì´ìƒ observeí•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì— ë§¤ë²ˆ ëª¨ë“  postê°€ ì¶œë ¥ëë‹¤ë©´ observeë¥¼ ë“±ë¡í•˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•¨ì´ë‹¤.</li>
<li>ë§ˆì§€ë§‰ìœ¼ë¡œ selectedCategoryê°€ ë³€ê²½ë˜ë©´ pageë¥¼ 1ë¡œ ì´ˆê¸°í™” í•´ì£¼ëŠ” ì‘ì—…ì„ í•œë‹¤.
<ul>
<li>ì´ˆê¸°í™” í•˜ì§€ ì•Šìœ¼ë©´ ì¹´í…Œê³ ë¦¬ê°€ ë°”ë€Œì–´ë„ pageê°€ ê·¸ëŒ€ë¡œ ìœ ì§€ ë˜ëŠ” í˜„ìƒì´ ë°œìƒí•œë‹¤.</li>
</ul>
</li>
</ul>
<deckgo-highlight-code language="jsx" terminal="carbon"  >
          <code slot="code">// useInfiniteScroll.tsx
import { MutableRefObject, useState, useRef, useEffect, useMemo } from &#39;react&#39;;
import { PostListType } from &#39;types/post.types&#39;;

const POST_COUNT_BY_PAGE = 9;

const useInfiniteScroll = ({ posts, selectedCategory }: { posts: PostListType[], selectedCategory: string }) =&gt; {
  const [page, setPage] = useState(1);
  const targetRef: MutableRefObject&lt;HTMLDivElement | null&gt; = useRef &lt; HTMLDivElement &gt; null;

  const filteredPosts = useMemo(
    () =&gt;
      posts.filter(
        ({
          node: {
            frontmatter: { categories },
          },
        }) =&gt; selectedCategory === &#39;All&#39; || categories.includes(selectedCategory),
      ),
    [selectedCategory],
  );

  const observer = new IntersectionObserver(
    (entries, observer) =&gt; {
      if (!entries[0].isIntersecting) return;

      setPage(prev =&gt; prev + 1);
      observer.disconnect();
    },
    {
      threshold: 1.0,
    },
  );

  useEffect(() =&gt; setPage(1), [selectedCategory]);

  useEffect(() =&gt; {
    if (
      !targetRef.current ||
      page * POST_COUNT_BY_PAGE &gt;= filteredPosts.length ||
      targetRef.current.children.length &lt;= 0
    )
      return;

    observer.observe(targetRef.current.children[targetRef.current.children.length - 1]);
  }, [page, selectedCategory]);

  return {
    targetRef,
    postsByPage: filteredPosts.slice(0, page * POST_COUNT_BY_PAGE),
  };
};

export default useInfiniteScroll;</code>
        </deckgo-highlight-code></div><style data-emotion="css c5tzst">.css-c5tzst{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}</style><div class="css-c5tzst evi8j960">Thank You for Visiting My Blog, Have a Good Day.<br/>@ 2022 Developer Jun, Powerd By Gatsby.</div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/í¬íŠ¸í´ë¦¬ì˜¤ì‚¬ì´íŠ¸/";window.___webpackCompilationHash="8c045dea22caf3cb9e79";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4718f0fec20e0d09d7f5.js"],"app":["/app-f34191c66d70ce0253b2.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-5a1562b048caf7768ff8.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-0495f90534ea9d80a60f.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-e5c9658481bba102ebab.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-cdd982b2742c5fa0a328.js"]};/*]]>*/</script><script src="/polyfill-4718f0fec20e0d09d7f5.js" nomodule=""></script><script src="/component---src-templates-post-tsx-cdd982b2742c5fa0a328.js" async=""></script><script src="/app-f34191c66d70ce0253b2.js" async=""></script><script src="/framework-6bdc9aaa9caa3de6408b.js" async=""></script><script src="/webpack-runtime-c0e03c5deb701c4aedb9.js" async=""></script></body></html>